(this["webpackJsonpreact-redux"]=this["webpackJsonpreact-redux"]||[]).push([[0],{71:function(e,t,n){e.exports=n(95)},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"switchMic",(function(){return q})),n.d(a,"setPlayingNote",(function(){return H})),n.d(a,"selectScale",(function(){return Y})),n.d(a,"selectScaleKey",(function(){return $}));var r=n(0),c=n.n(r),i=n(6),o=n.n(i),s=n(10),l=(n(82),n(17)),u=n(42),v=n(36),d=n(37),m=n(43),p=n(38),f=n(44),y=(n(83),n(56)),b=n.n(y),g={MAJOR:[2,2,1,2,2,2,1],HARMONIC_MAJOR:[2,2,1,2,1,3,1],MELODIC_MAJOR:[2,2,1,2,1,2,2],MAJOR_PENTATONIC:[2,2,3,2,3],MINOR:[2,1,2,2,1,2,2],HARMONIC_MINOR:[2,1,2,2,1,3,1],MELODIC_MINOR:[2,1,2,2,2,2,1],MINOR_PENTATONIC:[3,2,2,3,2]},h=Object.keys(g).reduce((function(e,t){return e[t]=t,e}),{}),O="SET_PLAYING_NOTE",E="SET_MIC_LISTEN",N="SET_SCALE",j="SET_SCALE_KEY",S=["C","C\u266f","D","D\u266f","E","F","F\u266f","G","G\u266f","A","A\u266f","B"],w=new(function(e){function t(){var e;return Object(v.a)(this,t),(e=Object(m.a)(this,Object(p.a)(t).call(this))).middleA=440,e.semitone=69,e.bufferSize=8192,e._initGetUserMedia(),e}return Object(f.a)(t,e),Object(d.a)(t,[{key:"_initGetUserMedia",value:function(){if(window.AudioContext=window.AudioContext||window.webkitAudioContext,!window.AudioContext)return alert("AudioContext not supported");void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return t||alert("getUserMedia is not implemented in this browser"),new Promise((function(n,a){t.call(navigator,e,n,a)}))})}},{key:"startRecord",value:function(){var e=this;navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){e.audioContext.createMediaStreamSource(t).connect(e.analyser),e.analyser.connect(e.scriptProcessor),e.scriptProcessor.connect(e.audioContext.destination),e.scriptProcessor.addEventListener("audioprocess",(function(t){var n=e.pitchDetector.do(t.inputBuffer.getChannelData(0));if(n){var a=e.getNote(n),r={name:S[a%12],value:a,cents:e.getCents(n,a),octave:Math.floor(a/12)-1,frequency:n};a>=30&&e.emit("notesDetected",[r])}}))})).catch((function(e){alert(e.name+": "+e.message)}))}},{key:"init",value:function(){var e=this;this.audioContext=new window.AudioContext,this.analyser=this.audioContext.createAnalyser(),this.scriptProcessor=this.audioContext.createScriptProcessor(this.bufferSize),window.Aubio().then((function(t){e.pitchDetector=new t.Pitch("default",e.bufferSize,1,e.audioContext.sampleRate),e.startRecord()}))}},{key:"getNote",value:function(e){var t=Math.log(e/this.middleA)/Math.log(2)*12;return Math.round(t)+this.semitone}},{key:"getStandardFrequency",value:function(e){return this.middleA*Math.pow(2,(e-this.semitone)/12)}},{key:"getCents",value:function(e,t){return Math.floor(1200*Math.log(e/this.getStandardFrequency(t))/Math.log(2))}},{key:"play",value:function(e){this.oscillator||(this.oscillator=this.audioContext.createOscillator(),this.oscillator.connect(this.audioContext.destination),this.oscillator.start()),this.oscillator.frequency.value=e}},{key:"stop",value:function(){this.oscillator.stop(),this.oscillator=null}}]),t}(b.a)),_=function(e,t){var n=g[e];if(!n)return null;for(var a=[t],r=1;r<n.length;r++){var c=(S.indexOf(a[r-1])+n[r-1])%S.length;a.push(S[c])}return a},P=(n(84),n(85),function(e){var t=e.name,n=void 0===t?"C#":t,a=e.octave,r=void 0===a?1:a,i=e.isSimilar,o=void 0!==i&&i,s=e.isActive,l=void 0===s||s,u=e.isInScale,v=void 0===u||u,d=["note","note--".concat(n[0].toLowerCase())];return o&&d.push("is-similar"),l&&d.push("is-active"),v||d.push("is-disabled"),c.a.createElement("div",{className:d.join(" ")},n,r)}),M=Object(s.b)((function(e,t){var n=e.playingNote,a=e.selectedScale,r=e.isMicActive,c=t.name,i=t.octave,o=r&&n&&n.name===c;return{isSimilar:o,isActive:o&&n.octave===i,isInScale:a.scale.includes(c)}}))(P),A=function(e){var t=e.children;return c.a.createElement("div",{className:"guitar__string"},t)},C=function(e){var t=e.note;return c.a.createElement("div",{className:"guitar__cell"},c.a.createElement("div",{className:"guitar__note"},c.a.createElement(M,t)))},k=function(e){var t=e.note;return c.a.createElement("div",{className:"guitar__zero"},c.a.createElement("div",{className:"guitar__note"},c.a.createElement(M,t)))},D=function(e){for(var t=e.frets,n=e.startNotes,a=[],r=0;r<6;r++){for(var i=[],o=n[r],s=S.indexOf(o.name),l=t+1,u=o.octave,v=0;v<l;v++){var d=(v+s)%S.length,m={name:S[d],octave:0===d?++u:u};0===v?i.push(c.a.createElement(k,{note:m,key:v})):i.push(c.a.createElement(C,{note:m,key:v}))}a.push(c.a.createElement(A,{key:r},i))}return c.a.createElement("div",{className:"guitar"},a)};n(86);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var I=function(e){var t=e.name,n=void 0===t?"C#":t,a=e.octave,r={name:n,octave:void 0===a?2:a};return c.a.createElement("div",{className:"piano__key"},c.a.createElement("div",{className:"piano__note"},c.a.createElement(M,r)))},R=function(e){for(var t=e.octaves,n=[],a=12*(void 0===t?3:t),r=0,i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.startNote);r<a;r++){var o=S.indexOf(i.name);if(n.push(c.a.createElement(I,{key:r,name:i.name,octave:i.octave})),~o){var s=(o+1)%S.length;0===s&&i.octave++,i.name=S[s]}}return c.a.createElement("div",{className:"piano"},n)},T=(n(87),function(e){var t=["tuner__arrow"];return e.isActive&&t.push("is-active"),c.a.createElement("div",{className:t.join(" ")})}),G=Object(s.b)((function(e){return{playingNote:e.playingNote}}))((function(e){var t=e.playingNote;return c.a.createElement("div",{className:"tuner"},c.a.createElement("div",{className:"tuner__col"},c.a.createElement(T,{isActive:t.cents<-10})),c.a.createElement("div",{className:"tuner__col tuner__note"},c.a.createElement(P,{isActive:t.cents>=-10&&t.cents<=10,name:t.name,note:t,octave:t.octave})),c.a.createElement("div",{className:"tuner__col"},c.a.createElement(T,{isActive:t.cents>10})))})),L=(n(88),n(131)),U=n(127),J=n(130),B=n(129),F=n(135),z=n(126),K=n(134),W=n(133),q=function(e){return{type:E,payload:e}},H=function(e){return{type:O,payload:e}},Y=function(e){return{type:N,payload:e}},$=function(e){return{type:j,payload:e}},Q=Object(s.b)((function(e){return{selectedScale:e.selectedScale}}),(function(e){return{onSelect:function(t){return e($(t))}}}))((function(e){var t=e.selectedScale,n=e.onSelect,a=void 0===n?function(e){return e}:n,r=S.map((function(e){return c.a.createElement(F.a,{key:e,value:e},e)}));return c.a.createElement(z.a,{fullWidth:!0},c.a.createElement(K.a,{htmlFor:"sidebar-select-scale-key"},"Scale Key"),c.a.createElement(W.a,{value:t.key,inputProps:{id:"sidebar-select-scale-key"},onChange:function(e){return a(e.target.value)}},r))})),V=Object(s.b)((function(e){return{selectedScale:e.selectedScale}}),(function(e){return{onSelect:function(t){return e(Y(t))}}}))((function(e){var t=e.selectedScale,n=e.onSelect,a=void 0===n?function(e){return e}:n,r=Object.entries(h).map((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return c.a.createElement(F.a,{key:n,value:n},a)}));return c.a.createElement(z.a,{fullWidth:!0},c.a.createElement(K.a,{htmlFor:"sidebar-select-scale"},"Scale"),c.a.createElement(W.a,{value:t.name,inputProps:{id:"sidebar-select-scale"},onChange:function(e){return a(e.target.value)}},r))})),X=n(128),Z=function(e){var t=e.start,n=void 0===t?function(e){return e}:t;return c.a.createElement(X.a,{fullWidth:!0,variant:"contained",color:"secondary",onClick:n},c.a.createElement("span",{"aria-label":"microphone",role:"img"},"\ud83c\udfa4"),"Enable Recording")},ee=Object(B.a)((function(e){return{paper:{padding:e.spacing(2),color:e.palette.text.secondary}}})),te=function(e){var t=e.children;return c.a.createElement(J.a,{variant:"h6",gutterBottom:!0},t)},ne=n(11);function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ce=Object(s.b)((function(e){return{playingNote:e.playingNote,isMicActive:e.isMicActive,selectedScaleName:e.selectedScaleName,selectedScaleKey:e.selectedScaleKey}}),(function(e){return{actions:Object(ne.bindActionCreators)(re({},a),e)}}))((function(e){var t=e.actions,n=e.isMicActive,a=t.switchMic,r=void 0===a?function(e){return e}:a,i=ee();return c.a.createElement("div",{className:"sidebar"},c.a.createElement("div",{className:"sidebar__in"},c.a.createElement("div",{className:"sidebar__item"},c.a.createElement(U.a,{className:i.paper},c.a.createElement(te,null,"Mini Tuner"),n?c.a.createElement(G,null):c.a.createElement(Z,{start:function(){r(!0),w.init()}}))),c.a.createElement("div",{className:"sidebar__item"},c.a.createElement(U.a,{className:i.paper},c.a.createElement(te,null,"Scale Settings"),c.a.createElement(L.a,{container:!0,spacing:2},c.a.createElement(L.a,{item:!0,xs:12},c.a.createElement(Q,null)),c.a.createElement(L.a,{item:!0,xs:12},c.a.createElement(V,null)))))))})),ie=n(132),oe=n(60),se=Object(oe.a)({palette:{type:"dark"}}),le=function(e){function t(){return Object(v.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;w.on("notesDetected",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=Object(u.a)(t,1),a=n[0],r=e.props.actions&&e.props.actions.setPlayingNote;r&&r(a)}))}},{key:"render",value:function(){var e=this.props,t=e.guitarStringsStartNotes,n=e.pianoStartNote;return c.a.createElement("div",{className:"application"},c.a.createElement("div",{className:"application__side"},c.a.createElement(ie.a,{theme:se},c.a.createElement(ce,null))),c.a.createElement("div",{className:"application__main"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"board-container"},c.a.createElement(D,{frets:18,startNotes:t}))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"board-container"},c.a.createElement(R,{octaves:4,startNote:n})))))}}]),t}(c.a.Component);function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var de=Object(s.b)((function(e){return{playingNote:e.playingNote,isMicActive:e.isMicActive,guitarStringsStartNotes:e.guitarStringsStartNotes,pianoStartNote:e.pianoStartNote,selectedScale:e.selectedScale}}),(function(e){return{actions:Object(ne.bindActionCreators)(ve({},a),e)}}))(le);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var me=n(58),pe=n(48),fe=n.n(pe);n(59);function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ge={playingNote:{name:"C",octave:3,cents:0},isMicActive:!1,scale:{name:h.MAJOR,key:S[0]}};ge.scale.scale=_(ge.scale.name,ge.scale.key);var he=[{name:"E",octave:4},{name:"B",octave:3},{name:"G",octave:3},{name:"D",octave:3},{name:"A",octave:2},{name:"E",octave:2}],Oe={name:"C",octave:2},Ee=Object(ne.combineReducers)({playingNote:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge.playingNote,t=arguments.length>1?arguments[1]:void 0;return t.type===O?t.payload:e},isMicActive:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge.isMicActive,t=arguments.length>1?arguments[1]:void 0;return t.type===E?t.payload:e},guitarStringsStartNotes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he;arguments.length>1&&arguments[1];return e},pianoStartNote:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe;arguments.length>1&&arguments[1];return e},selectedScale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be({},ge.scale),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:var n=e.key,a=t.payload;return{key:n,name:a,scale:_(a,n)};case j:var r=e.name,c=t.payload;return{key:c,name:r,scale:_(r,c)};default:return e}}}),Ne=[fe.a,me.a];var je=ne.applyMiddleware.apply(void 0,Ne);var Se=je(ne.createStore)(Ee),we=function(){o.a.render(c.a.createElement(s.a,{store:Se},c.a.createElement(de,null)),document.getElementById("root"))};Se.subscribe(we),we(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[71,1,2]]]);
//# sourceMappingURL=main.591576b1.chunk.js.map