(this["webpackJsonpreact-redux"]=this["webpackJsonpreact-redux"]||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},102:function(e,t,n){},104:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(8),o=n.n(i),c=n(14),s=(n(94),n(36)),l=n(45),u=n(46),d=n(52),m=n(47),p=n(53),v=(n(95),n(69)),f=n.n(v),g=n(17);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var y=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],b={LYDIAN:[2,2,2,1,2,2,1],MAJOR:[2,2,1,2,2,2,1],MIXOLYDIAN:[2,2,1,2,2,1,2],DORIAN:[2,1,2,2,2,1,2]},O={MINOR:[2,1,2,2,1,2,2],PHRIGIAN:[1,2,2,2,1,2,2],LOCRIAN:[1,2,2,1,2,2,2]},E=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(n,!0).forEach((function(t){Object(g.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({SHOW_ALL:Array(12).fill(1)},b,{},O,{HARMONIC_MAJOR:[2,2,1,2,1,3,1],MELODIC_MAJOR:[2,2,1,2,1,2,2],MAJOR_PENTATONIC:[2,2,3,2,3],MAJOR_BLUES:[2,1,1,3,2,3],HARMONIC_MINOR:[2,1,2,2,1,3,1],MELODIC_MINOR:[2,1,2,2,2,2,1],MINOR_PENTATONIC:[3,2,2,3,2],MINOR_BLUES:[3,2,1,1,3,2]}),w=Object.keys(E).reduce((function(e,t){return e[t]=t,e}),{}),N={MAJOR:"Major/Ionian",MINOR:"Minor/Aeolian"},S=Object.keys(E).reduce((function(e,t){return e[t]=N[t]?N[t]:t.split("_").map((function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()})).join(" "),e}),{}),j="SET_PLAYING_NOTE",A="SET_MIC_LISTEN",M="SET_SCALE_NAME",k="SET_SCALE_KEY",_=new(function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(m.a)(t).call(this))).middleA=440,e.semitone=69,e.bufferSize=8192,e._initGetUserMedia(),e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"_initGetUserMedia",value:function(){if(window.AudioContext=window.AudioContext||window.webkitAudioContext,!window.AudioContext)return alert("AudioContext not supported");void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return t||alert("getUserMedia is not implemented in this browser"),new Promise((function(n,a){t.call(navigator,e,n,a)}))})}},{key:"startRecord",value:function(){var e=this;navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){e.audioContext.createMediaStreamSource(t).connect(e.analyser),e.analyser.connect(e.scriptProcessor),e.scriptProcessor.connect(e.audioContext.destination),e.scriptProcessor.addEventListener("audioprocess",(function(t){var n=e.pitchDetector.do(t.inputBuffer.getChannelData(0));if(n){var a=e.getNote(n),r={name:y[a%12],value:a,cents:e.getCents(n,a),octave:Math.floor(a/12)-1,frequency:n};a>=30&&e.emit("notesDetected",[r])}}))})).catch((function(e){alert(e.name+": "+e.message)}))}},{key:"init",value:function(){var e=this;this.audioContext=new window.AudioContext,this.analyser=this.audioContext.createAnalyser(),this.scriptProcessor=this.audioContext.createScriptProcessor(this.bufferSize),window.Aubio().then((function(t){e.pitchDetector=new t.Pitch("default",e.bufferSize,1,e.audioContext.sampleRate),e.startRecord()}))}},{key:"getNote",value:function(e){var t=Math.log(e/this.middleA)/Math.log(2)*12;return Math.round(t)+this.semitone}},{key:"getStandardFrequency",value:function(e){return this.middleA*Math.pow(2,(e-this.semitone)/12)}},{key:"getCents",value:function(e,t){return Math.floor(1200*Math.log(e/this.getStandardFrequency(t))/Math.log(2))}},{key:"play",value:function(e){this.oscillator||(this.oscillator=this.audioContext.createOscillator(),this.oscillator.connect(this.audioContext.destination),this.oscillator.start()),this.oscillator.frequency.value=e}},{key:"stop",value:function(){this.oscillator.stop(),this.oscillator=null}}]),t}(f.a)),P=(n(96),n(135)),C=n(147),D=n(133),x=n(145),I=n(141),R=n(70),L=n.n(R),T=function(e){var t=e.options,n=e.onSelect,a=e.selectedValue,i=e.title,o=t.map((function(e){var t=e.name,n=e.value;return r.a.createElement(C.a,{key:n,value:n},t)})),c=L.a.v4();return r.a.createElement(D.a,{fullWidth:!0,variant:"filled"},r.a.createElement(x.a,{htmlFor:c},i),r.a.createElement(I.a,{value:a,inputProps:{id:c},onChange:function(e){n(e.target.value)}},o))},U=y.map((function(e){return{name:e,value:e}})),W=Object.entries(S).map((function(e){var t=Object(s.a)(e,2),n=t[0];return{name:t[1],value:n}})),B=function(e){var t=e.selectedScale,n=e.onSelectKey,a=e.onSelectScale;return r.a.createElement(P.a,{container:!0,spacing:2},r.a.createElement(P.a,{item:!0,xs:12},r.a.createElement(T,{selectedValue:t.key,options:U,onSelect:n,title:"Select key"})),r.a.createElement(P.a,{item:!0,xs:12},r.a.createElement(T,{selectedValue:t.name,options:W,onSelect:a,title:"Select scale"})))},G=Object(c.b)((function(e){return{selectedScale:e.selectedScale}}),(function(e){return{onSelectKey:function(t){return e({type:k,payload:t})},onSelectScale:function(t){return e({type:M,payload:t})}}}))(B),J=(n(99),n(100),function(e){var t=e.name,n=e.octave,a=e.isSimilar,i=void 0!==a&&a,o=e.isActive,c=void 0===o||o,s=e.isInScale,l=void 0===s||s,u=e.isKey,d=void 0!==u&&u,m=["note","note--".concat(t[0].toLowerCase()).concat("#"===t[1]?"-diez":"")],p="".concat(t).concat(n||"");return i&&m.push("is-similar"),c&&m.push("is-active"),l||m.push("is-disabled"),d&&m.push("is-key"),r.a.createElement("div",{className:m.join(" ")},p)}),z=function(e){var t=["tuner__arrow"];return e.isActive&&t.push("is-active"),r.a.createElement("div",{className:t.join(" ")})},F=function(e){var t=e.playingNote;return r.a.createElement("div",{className:"tuner"},r.a.createElement("div",{className:"tuner__col"},r.a.createElement(z,{isActive:t.cents<-10})),r.a.createElement("div",{className:"tuner__col tuner__note"},r.a.createElement(J,{isActive:t.cents>=-10&&t.cents<=10,name:t.name,octave:t.octave})),r.a.createElement("div",{className:"tuner__col"},r.a.createElement(z,{isActive:t.cents>10})))},K=n(136),q=function(e){var t=e.start;return r.a.createElement(K.a,{fullWidth:!0,variant:"contained",color:"secondary",onClick:t},r.a.createElement("span",{"aria-label":"microphone",role:"img"},"\ud83c\udfa4"),"\xa0Enable Recording")},H=n(138),Y=n(134),V=n(137),X=function(e){var t=e.children;return r.a.createElement(V.a,{variant:"h6",gutterBottom:!0},t)},$=Object(H.a)((function(e){return{paper:{padding:e.spacing(2),color:e.palette.text.secondary}}})),Q=function(e){var t=e.title,n=e.children,a=$();return r.a.createElement("div",{className:"sidebar__item"},r.a.createElement(Y.a,{className:a.paper},r.a.createElement(X,null,t),n))},Z=function(e){var t=e.isMicActive,n=e.playingNote,a=e.switchMic;return r.a.createElement("div",{className:"sidebar"},r.a.createElement("div",{className:"sidebar__in"},r.a.createElement(Q,{title:"Mini Tuner"},t?r.a.createElement(F,{playingNote:n}):r.a.createElement(q,{start:function(){a(!0),_.init()}})),r.a.createElement(Q,{title:"Scale Settings"},r.a.createElement(G,null))))},ee=Object(c.b)((function(e){return{isMicActive:e.isMicActive,playingNote:e.playingNote}}),(function(e){return{switchMic:function(t){return e(function(e){return{type:A,payload:e}}(t))}}}))(Z),te=(n(101),Object(c.b)((function(e,t){var n=e.playingNote,a=e.selectedScale,r=e.isMicActive,i=t.name,o=t.octave,c=r&&n&&n.name===i;return{isSimilar:c,isActive:c&&(null===o||n.octave===o),isInScale:a.notes.includes(i),isKey:a.key===i}}))(J)),ne=function(e){var t=e.note;return r.a.createElement("div",{className:"guitar__cell"},r.a.createElement("div",{className:"guitar__note"},r.a.createElement(te,t)))},ae=function(e){var t=e.note;return r.a.createElement("div",{className:"guitar__zero"},r.a.createElement("div",{className:"guitar__note"},r.a.createElement(te,t)))},re=function(e){for(var t=e.frets,n=e.startNotes,a=[],i=0;i<6;i++){for(var o=[],c=n[i],s=y.indexOf(c.name),l=t+1,u=c.octave||0,d=0;d<l;d++){var m=(d+s)%y.length,p={name:y[m],octave:0===m?++u:u};0===d?o.push(r.a.createElement(ae,{note:p,key:d})):o.push(r.a.createElement(ne,{note:p,key:d}))}a.push(r.a.createElement("div",{key:i,className:"guitar__string"},o))}return r.a.createElement("div",{className:"guitar"},a)};n(102);function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var oe=function(e){var t={name:e.name,octave:e.octave};return r.a.createElement("div",{className:"piano__key"},r.a.createElement("div",{className:"piano__note"},r.a.createElement(te,t)))},ce=function(e){for(var t=e.octaves,n=void 0===t?3:t,a=e.startNote,i=[],o=12*n,c=a.octave||2,s=0,l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(n,!0).forEach((function(t){Object(g.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},a);s<o;s++){var u=y.indexOf(l.name);if(i.push(r.a.createElement(oe,{key:s,name:l.name,octave:1===n?null:c})),~u){var d=(u+1)%y.length;0===d&&c++,l.name=y[d]}}return r.a.createElement("div",{className:"piano"},i)},se=function(e){var t=e.guitarOpenStrings,n=e.pianoStartNote;e.selectedScale;return r.a.createElement("div",{className:"application__main"},r.a.createElement("div",{className:"board-container"},r.a.createElement(re,{frets:18,startNotes:t})),r.a.createElement("div",{className:"board-container"},r.a.createElement(ce,{octaves:4,startNote:n})))},le=Object(c.b)((function(e){return{guitarOpenStrings:e.guitarOpenStrings,pianoStartNote:e.pianoStartNote,selectedScale:e.selectedScale}}))(se),ue=n(140),de=n(78),me=Object(de.a)({palette:{type:"dark"}}),pe=n(139),ve=n(143),fe=n(144),ge=n(74),he=n.n(ge),ye=n(72),be=n.n(ye),Oe=n(73),Ee=n.n(Oe),we=Object(H.a)((function(e){return{root:{display:"flex"},drawer:Object(g.a)({},e.breakpoints.up("md"),{width:240,flexShrink:0}),menuButton:Object(g.a)({left:e.spacing(2),top:e.spacing(2),position:"fixed",zIndex:e.zIndex.modal+1},e.breakpoints.up("md"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:Object(g.a)({background:"#212121",border:0,width:240},e.breakpoints.down("md"),{paddingTop:e.spacing(8)}),content:Object(g.a)({flexGrow:1,minWidth:1100},e.breakpoints.down("md"),{paddingTop:e.spacing(6)})}})),Ne=function(e){var t,n=e.Sidebar,a=e.Main,i=e.isMicActive,o=we(),c=r.a.useState(!1),l=Object(s.a)(c,2),u=l[0],d=l[1],m=function(){return d(!u)},p=r.a.createElement(n,null),v=!1;return u?t=r.a.createElement(be.a,null):i?t=r.a.createElement(he.a,null):(t=r.a.createElement(Ee.a,null),v=!0),r.a.createElement("div",{className:o.root},r.a.createElement("div",{className:o.menuButton},r.a.createElement(pe.a,{size:"small",color:u?"default":"secondary",className:"mobile-menu-icon".concat(v?" show-mic":""),onClick:m,"aria-label":"edit"},t)),r.a.createElement("nav",{className:o.drawer},r.a.createElement(ve.a,{mdUp:!0,implementation:"css"},r.a.createElement(fe.a,{variant:"temporary",anchor:"left",open:u,onClose:m,classes:{paper:o.drawerPaper},ModalProps:{keepMounted:!0}},p)),r.a.createElement(ve.a,{smDown:!0,implementation:"css"},r.a.createElement(fe.a,{classes:{paper:o.drawerPaper},variant:"permanent",open:!0},p))),r.a.createElement("main",{className:o.content},r.a.createElement(a,null)))},Se=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;_.on("notesDetected",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=Object(s.a)(t,1),a=n[0],r=e.props.setPlayingNote;"function"===typeof r&&r(a)}))}},{key:"render",value:function(){var e=this.props.isMicActive;return r.a.createElement("div",{className:"application"},r.a.createElement(ue.a,{theme:me},r.a.createElement(Ne,{Sidebar:ee,Main:le,isMicActive:e})))}}]),t}(r.a.Component),je=Object(c.b)((function(e){return{isMicActive:e.isMicActive}}),(function(e){return{setPlayingNote:function(t){return e(function(e){return{type:j,payload:e}}(t))}}}))(Se),Ae=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Me(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ke=n(24),_e=n(75),Pe=(n(76),n(77),function(e,t){for(var n=E[e],a=[t],r=1;r<n.length;r++){var i=(y.indexOf(a[r-1])+n[r-1])%y.length;a.push(y[i])}return a});function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(n,!0).forEach((function(t){Object(g.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xe={playingNote:{name:"C",octave:3,cents:0},isMicActive:!1,scale:{name:w.MAJOR,key:y[0],notes:Pe(w.MAJOR,y[0])},pianoStartNote:{name:"C",octave:2},guitarOpenStrings:[{name:"E",octave:4},{name:"B",octave:3},{name:"G",octave:3},{name:"D",octave:3},{name:"A",octave:2},{name:"E",octave:2}]},Ie=Object(ke.combineReducers)({playingNote:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe.playingNote,t=arguments.length>1?arguments[1]:void 0;return t.type===j?t.payload:e},isMicActive:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe.isMicActive,t=arguments.length>1?arguments[1]:void 0;return t.type===A?t.payload:e},guitarOpenStrings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe.guitarOpenStrings;return e},pianoStartNote:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe.pianoStartNote;return e},selectedScale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De({},xe.scale),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:var n=e.key,a=t.payload;return{key:n,name:a,notes:Pe(a,n)};case k:var r=e.name,i=t.payload;return{key:i,name:r,notes:Pe(r,i)};default:return e}}}),Re=[_e.a];var Le=ke.applyMiddleware.apply(void 0,Re);var Te=Le(ke.createStore)(Ie),Ue=function(){o.a.render(r.a.createElement(c.a,{store:Te},r.a.createElement(je,null)),document.getElementById("root"))};Te.subscribe(Ue),Ue(),function(e){if("serviceWorker"in navigator){if(new URL("/guitar-trainer",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/guitar-trainer","/service-worker.js");Ae?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Me(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Me(t,e)}))}}()},85:function(e,t,n){e.exports=n(104)},94:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){},99:function(e,t,n){}},[[85,1,2]]]);
//# sourceMappingURL=main.cf2055ce.chunk.js.map