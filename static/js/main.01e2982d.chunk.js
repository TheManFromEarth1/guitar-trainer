(this["webpackJsonpreact-redux"]=this["webpackJsonpreact-redux"]||[]).push([[0],{82:function(e,t,n){e.exports=n(99)},91:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){},97:function(e,t,n){},99:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"switchMic",(function(){return T})),n.d(a,"setPlayingNote",(function(){return U})),n.d(a,"selectScale",(function(){return B})),n.d(a,"selectScaleKey",(function(){return G}));var r=n(0),i=n.n(r),c=n(8),o=n.n(c),l=n(11),s=(n(91),n(36)),u=n(45),d=n(46),m=n(52),v=n(47),p=n(53),f=(n(92),n(68)),y=n.n(f),b=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],h={ALL:Array(12).fill(1),MAJOR:[2,2,1,2,2,2,1],HARMONIC_MAJOR:[2,2,1,2,1,3,1],MELODIC_MAJOR:[2,2,1,2,1,2,2],MAJOR_PENTATONIC:[2,2,3,2,3],MAJOR_BLUES:[2,1,1,3,2,3],MINOR:[2,1,2,2,1,2,2],HARMONIC_MINOR:[2,1,2,2,1,3,1],MELODIC_MINOR:[2,1,2,2,2,2,1],MINOR_PENTATONIC:[3,2,2,3,2],MINOR_BLUES:[3,2,1,1,3,2],MIXOLYDIAN:[2,2,1,2,2,1,2],DORIAN:[2,1,2,2,2,1,2],PHRIGIAN:[1,2,2,2,1,2,2],LYDIAN:[2,2,2,1,2,2,1],LOCRIAN:[1,2,2,1,2,2,2]},g={MAJOR:"Major/Ionian",MINOR:"Minor/Aeolian"},O=Object.keys(h).reduce((function(e,t){return e[t]=t,e}),{}),E=Object.keys(h).reduce((function(e,t){return e[t]=g[t]?g[t]:t.split("_").map((function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()})).join(" "),e}),{}),N="SET_PLAYING_NOTE",j="SET_MIC_LISTEN",w="SET_SCALE",S="SET_SCALE_KEY",M=new(function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(m.a)(this,Object(v.a)(t).call(this))).middleA=440,e.semitone=69,e.bufferSize=8192,e._initGetUserMedia(),e}return Object(p.a)(t,e),Object(d.a)(t,[{key:"_initGetUserMedia",value:function(){if(window.AudioContext=window.AudioContext||window.webkitAudioContext,!window.AudioContext)return alert("AudioContext not supported");void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return t||alert("getUserMedia is not implemented in this browser"),new Promise((function(n,a){t.call(navigator,e,n,a)}))})}},{key:"startRecord",value:function(){var e=this;navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){e.audioContext.createMediaStreamSource(t).connect(e.analyser),e.analyser.connect(e.scriptProcessor),e.scriptProcessor.connect(e.audioContext.destination),e.scriptProcessor.addEventListener("audioprocess",(function(t){var n=e.pitchDetector.do(t.inputBuffer.getChannelData(0));if(n){var a=e.getNote(n),r={name:b[a%12],value:a,cents:e.getCents(n,a),octave:Math.floor(a/12)-1,frequency:n};a>=30&&e.emit("notesDetected",[r])}}))})).catch((function(e){alert(e.name+": "+e.message)}))}},{key:"init",value:function(){var e=this;this.audioContext=new window.AudioContext,this.analyser=this.audioContext.createAnalyser(),this.scriptProcessor=this.audioContext.createScriptProcessor(this.bufferSize),window.Aubio().then((function(t){e.pitchDetector=new t.Pitch("default",e.bufferSize,1,e.audioContext.sampleRate),e.startRecord()}))}},{key:"getNote",value:function(e){var t=Math.log(e/this.middleA)/Math.log(2)*12;return Math.round(t)+this.semitone}},{key:"getStandardFrequency",value:function(e){return this.middleA*Math.pow(2,(e-this.semitone)/12)}},{key:"getCents",value:function(e,t){return Math.floor(1200*Math.log(e/this.getStandardFrequency(t))/Math.log(2))}},{key:"play",value:function(e){this.oscillator||(this.oscillator=this.audioContext.createOscillator(),this.oscillator.connect(this.audioContext.destination),this.oscillator.start()),this.oscillator.frequency.value=e}},{key:"stop",value:function(){this.oscillator.stop(),this.oscillator=null}}]),t}(y.a)),A=function(e,t){var n=h[e];if(!n)return null;for(var a=[t],r=1;r<n.length;r++){var i=(b.indexOf(a[r-1])+n[r-1])%b.length;a.push(b[i])}return a},k=n(17),_=(n(93),n(131)),P=n(132),C=n(129),D=n(133),x=n(141),I=n(128),R=n(140),L=n(136),T=function(e){return{type:j,payload:e}},U=function(e){return{type:N,payload:e}},B=function(e){return{type:w,payload:e}},G=function(e){return{type:S,payload:e}},z=Object(l.b)((function(e){return{selectedScale:e.selectedScale}}),(function(e){return{onSelect:function(t){return e(G(t))}}}))((function(e){var t=e.selectedScale,n=e.onSelect,a=void 0===n?function(e){return e}:n,r=b.map((function(e){return i.a.createElement(x.a,{key:e,value:e},e)}));return i.a.createElement(I.a,{fullWidth:!0,variant:"filled"},i.a.createElement(R.a,{htmlFor:"sidebar-select-scale-key"},"Scale Key"),i.a.createElement(L.a,{value:t.key,inputProps:{id:"sidebar-select-scale-key"},onChange:function(e){return a(e.target.value)}},r))})),J=Object(l.b)((function(e){return{selectedScale:e.selectedScale}}),(function(e){return{onSelect:function(t){return e(B(t))}}}))((function(e){var t=e.selectedScale,n=e.onSelect,a=void 0===n?function(e){return e}:n,r=Object.entries(E).map((function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];return i.a.createElement(x.a,{key:n,value:n},a)}));return i.a.createElement(I.a,{fullWidth:!0,variant:"filled"},i.a.createElement(R.a,{htmlFor:"sidebar-select-scale"},"Scale"),i.a.createElement(L.a,{value:t.name,inputProps:{id:"sidebar-select-scale"},onChange:function(e){return a(e.target.value)}},r))})),K=(n(94),n(95),function(e){var t=e.name,n=e.octave,a=e.isSimilar,r=void 0!==a&&a,c=e.isActive,o=void 0===c||c,l=e.isInScale,s=void 0===l||l,u=e.isKey,d=void 0!==u&&u,m=["note","note--".concat(t[0].toLowerCase()).concat("#"===t[1]?"-diez":"")],v="".concat(t).concat(n||"");return r&&m.push("is-similar"),o&&m.push("is-active"),s||m.push("is-disabled"),d&&m.push("is-key"),i.a.createElement("div",{className:m.join(" ")},v)}),F=function(e){var t=["tuner__arrow"];return e.isActive&&t.push("is-active"),i.a.createElement("div",{className:t.join(" ")})},W=Object(l.b)((function(e){return{playingNote:e.playingNote}}))((function(e){var t=e.playingNote;return i.a.createElement("div",{className:"tuner"},i.a.createElement("div",{className:"tuner__col"},i.a.createElement(F,{isActive:t.cents<-10})),i.a.createElement("div",{className:"tuner__col tuner__note"},i.a.createElement(K,{isActive:t.cents>=-10&&t.cents<=10,name:t.name,note:t,octave:t.octave})),i.a.createElement("div",{className:"tuner__col"},i.a.createElement(F,{isActive:t.cents>10})))})),q=n(130),Y=function(e){var t=e.start,n=void 0===t?function(e){return e}:t;return i.a.createElement(q.a,{fullWidth:!0,variant:"contained",color:"secondary",onClick:n},i.a.createElement("span",{"aria-label":"microphone",role:"img"},"\ud83c\udfa4"),"\xa0Enable Recording")},H=Object(_.a)((function(e){return{paper:{padding:e.spacing(2),color:e.palette.text.secondary}}})),X=function(e){var t=e.children;return i.a.createElement(P.a,{variant:"h6",gutterBottom:!0},t)},$=function(e){var t=e.title,n=e.children,a=H();return i.a.createElement("div",{className:"sidebar__item"},i.a.createElement(C.a,{className:a.paper},i.a.createElement(X,null,t),n))},Q=n(20);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(n,!0).forEach((function(t){Object(k.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ee=Object(l.b)((function(e){return{playingNote:e.playingNote,isMicActive:e.isMicActive,selectedScaleKey:e.selectedScale.key}}),(function(e){return{actions:Object(Q.bindActionCreators)(Z({},a),e)}}))((function(e){var t=e.actions,n=e.isMicActive,a=(e.selectedScaleKey,t.switchMic),r=void 0===a?function(e){return e}:a;return i.a.createElement("div",{className:"sidebar"},i.a.createElement("div",{className:"sidebar__in"},i.a.createElement($,{title:"Mini Tuner"},n?i.a.createElement(W,null):i.a.createElement(Y,{start:function(){r(!0),M.init()}})),i.a.createElement($,{title:"Scale Settings"},i.a.createElement(D.a,{container:!0,spacing:2},i.a.createElement(D.a,{item:!0,xs:12},i.a.createElement(z,null)),i.a.createElement(D.a,{item:!0,xs:12},i.a.createElement(J,null))))))})),te=(n(96),Object(l.b)((function(e,t){var n=e.playingNote,a=e.selectedScale,r=e.isMicActive,i=t.name,c=t.octave,o=r&&n&&n.name===i;return{isSimilar:o,isActive:o&&(null===c||n.octave===c),isInScale:a.scale.includes(i),isKey:a.key===i}}))(K)),ne=function(e){var t=e.children;return i.a.createElement("div",{className:"guitar__string"},t)},ae=function(e){var t=e.note;return i.a.createElement("div",{className:"guitar__cell"},i.a.createElement("div",{className:"guitar__note"},i.a.createElement(te,t)))},re=function(e){var t=e.note;return i.a.createElement("div",{className:"guitar__zero"},i.a.createElement("div",{className:"guitar__note"},i.a.createElement(te,t)))},ie=function(e){for(var t=e.frets,n=e.startNotes,a=[],r=0;r<6;r++){for(var c=[],o=n[r],l=b.indexOf(o.name),s=t+1,u=o.octave,d=0;d<s;d++){var m=(d+l)%b.length,v={name:b[m],octave:0===m?++u:u};0===d?c.push(i.a.createElement(re,{note:v,key:d})):c.push(i.a.createElement(ae,{note:v,key:d}))}a.push(i.a.createElement(ne,{key:r},c))}return i.a.createElement("div",{className:"guitar"},a)};n(97);function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var oe=function(e){var t=e.name,n=void 0===t?"C#":t,a=e.octave,r={name:n,octave:void 0===a?2:a};return i.a.createElement("div",{className:"piano__key"},i.a.createElement("div",{className:"piano__note"},i.a.createElement(te,r)))},le=function(e){for(var t=e.octaves,n=void 0===t?3:t,a=[],r=12*n,c=0,o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(n,!0).forEach((function(t){Object(k.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.startNote);c<r;c++){var l=b.indexOf(o.name);if(a.push(i.a.createElement(oe,{key:c,name:o.name,octave:1===n?null:o.octave})),~l){var s=(l+1)%b.length;0===s&&o.octave++,o.name=b[s]}}return i.a.createElement("div",{className:"piano"},a)},se=Object(l.b)((function(e){return{guitarStringsStartNotes:e.guitarStringsStartNotes,pianoStartNote:e.pianoStartNote}}))((function(e){var t=e.guitarStringsStartNotes,n=e.pianoStartNote;return i.a.createElement("div",{className:"application__main"},i.a.createElement("div",{className:"board-container"},i.a.createElement(ie,{frets:18,startNotes:t})),i.a.createElement("div",{className:"board-container"},i.a.createElement(le,{octaves:4,startNote:n})))})),ue=n(135),de=n(75),me=Object(de.a)({palette:{type:"dark"}}),ve=n(134),pe=n(138),fe=n(139),ye=n(72),be=n.n(ye),he=n(70),ge=n.n(he),Oe=n(71),Ee=n.n(Oe),Ne=Object(_.a)((function(e){return{root:{display:"flex"},drawer:Object(k.a)({},e.breakpoints.up("md"),{width:240,flexShrink:0}),menuButton:Object(k.a)({left:e.spacing(2),top:e.spacing(2),position:"fixed",zIndex:e.zIndex.modal+1},e.breakpoints.up("md"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:Object(k.a)({background:"#212121",border:0,width:240},e.breakpoints.down("md"),{paddingTop:e.spacing(8)}),content:Object(k.a)({flexGrow:1,minWidth:1100},e.breakpoints.down("md"),{paddingTop:e.spacing(6)})}})),je=function(e){var t,n=e.Sidebar,a=e.Main,r=e.isMicActive,c=Ne(),o=i.a.useState(!1),l=Object(s.a)(o,2),u=l[0],d=l[1],m=function(){d(!u)},v=i.a.createElement(n,null),p=!1;return u?t=i.a.createElement(ge.a,null):r?t=i.a.createElement(be.a,null):(t=i.a.createElement(Ee.a,null),p=!0),i.a.createElement("div",{className:c.root},i.a.createElement("div",{className:c.menuButton},i.a.createElement(ve.a,{size:"small",color:u?"default":"secondary",className:"mobile-menu-icon".concat(p?" show-mic":""),onClick:m,"aria-label":"edit"},t)),i.a.createElement("nav",{className:c.drawer},i.a.createElement(pe.a,{mdUp:!0,implementation:"css"},i.a.createElement(fe.a,{variant:"temporary",anchor:"left",open:u,onClose:m,classes:{paper:c.drawerPaper},ModalProps:{keepMounted:!0}},v)),i.a.createElement(pe.a,{smDown:!0,implementation:"css"},i.a.createElement(fe.a,{classes:{paper:c.drawerPaper},variant:"permanent",open:!0},v))),i.a.createElement("main",{className:c.content},i.a.createElement(a,null)))},we=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;M.on("notesDetected",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=Object(s.a)(t,1),a=n[0],r=e.props.setPlayingNote;"function"===typeof r&&r(a)}))}},{key:"render",value:function(){var e=this.props.isMicActive;return i.a.createElement("div",{className:"application"},i.a.createElement(ue.a,{theme:me},i.a.createElement(je,{Sidebar:ee,Main:se,isMicActive:e})))}}]),t}(i.a.Component),Se=Object(l.b)((function(e){return{isMicActive:e.isMicActive}}),(function(e){return{setPlayingNote:function(t){return e(U(t))}}}))(we);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Me=n(73),Ae=n(59),ke=n.n(Ae);n(74);function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(n,!0).forEach((function(t){Object(k.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ce={playingNote:{name:"C",octave:3,cents:0},isMicActive:!1,scale:{name:O.MAJOR,key:b[0]}};Ce.scale.scale=A(Ce.scale.name,Ce.scale.key);var De=[{name:"E",octave:4},{name:"B",octave:3},{name:"G",octave:3},{name:"D",octave:3},{name:"A",octave:2},{name:"E",octave:2}],xe={name:"C",octave:2},Ie=Object(Q.combineReducers)({playingNote:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce.playingNote,t=arguments.length>1?arguments[1]:void 0;return t.type===N?t.payload:e},isMicActive:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce.isMicActive,t=arguments.length>1?arguments[1]:void 0;return t.type===j?t.payload:e},guitarStringsStartNotes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De;arguments.length>1&&arguments[1];return e},pianoStartNote:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe;arguments.length>1&&arguments[1];return e},selectedScale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe({},Ce.scale),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:var n=e.key,a=t.payload;return{key:n,name:a,scale:A(a,n)};case S:var r=e.name,i=t.payload;return{key:i,name:r,scale:A(r,i)};default:return e}}}),Re=[ke.a,Me.a];var Le=Q.applyMiddleware.apply(void 0,Re);var Te=Le(Q.createStore)(Ie),Ue=function(){o.a.render(i.a.createElement(l.a,{store:Te},i.a.createElement(Se,null)),document.getElementById("root"))};Te.subscribe(Ue),Ue(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[82,1,2]]]);
//# sourceMappingURL=main.01e2982d.chunk.js.map