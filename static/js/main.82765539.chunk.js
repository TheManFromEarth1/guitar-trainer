(this["webpackJsonpreact-redux"]=this["webpackJsonpreact-redux"]||[]).push([[0],{81:function(e,t,a){e.exports=a(98)},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){},98:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"switchMic",(function(){return B})),a.d(n,"setPlayingNote",(function(){return G})),a.d(n,"selectScale",(function(){return z})),a.d(n,"selectScaleKey",(function(){return J}));var r=a(0),i=a.n(r),c=a(8),o=a.n(c),l=a(11),s=(a(90),a(36)),u=a(44),d=a(45),m=a(51),v=a(46),p=a(52),f=(a(91),a(68)),y=a.n(f),b={ALL:Array(12).fill(1),MAJOR:[2,2,1,2,2,2,1],HARMONIC_MAJOR:[2,2,1,2,1,3,1],MELODIC_MAJOR:[2,2,1,2,1,2,2],MAJOR_PENTATONIC:[2,2,3,2,3],MAJOR_BLUES:[2,1,1,3,2,3],MINOR:[2,1,2,2,1,2,2],HARMONIC_MINOR:[2,1,2,2,1,3,1],MELODIC_MINOR:[2,1,2,2,2,2,1],MINOR_PENTATONIC:[3,2,2,3,2],MINOR_BLUES:[3,2,1,1,3,2],MIXOLYDIAN:[2,2,1,2,2,1,2],IONIAN:[2,2,1,2,2,2,1],DORIAN:[2,1,2,2,2,1,2],PHRIGIAN:[1,2,2,2,1,2,2],LYDIAN:[2,2,2,1,2,2,1],AEOLIAN:[2,1,2,2,1,2,2],LOCRIAN:[1,2,2,1,2,2,2]},h=Object.keys(b).reduce((function(e,t){return e[t]=t,e}),{}),g=Object.keys(b).reduce((function(e,t){return e[t]=t.split("_").map((function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()})).join(" "),e}),{}),O="SET_PLAYING_NOTE",E="SET_MIC_LISTEN",N="SET_SCALE",S="SET_SCALE_KEY",j=["C","C\u266f","D","D\u266f","E","F","F\u266f","G","G\u266f","A","A\u266f","B"],w=new(function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(m.a)(this,Object(v.a)(t).call(this))).middleA=440,e.semitone=69,e.bufferSize=8192,e._initGetUserMedia(),e}return Object(p.a)(t,e),Object(d.a)(t,[{key:"_initGetUserMedia",value:function(){if(window.AudioContext=window.AudioContext||window.webkitAudioContext,!window.AudioContext)return alert("AudioContext not supported");void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return t||alert("getUserMedia is not implemented in this browser"),new Promise((function(a,n){t.call(navigator,e,a,n)}))})}},{key:"startRecord",value:function(){var e=this;navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){e.audioContext.createMediaStreamSource(t).connect(e.analyser),e.analyser.connect(e.scriptProcessor),e.scriptProcessor.connect(e.audioContext.destination),e.scriptProcessor.addEventListener("audioprocess",(function(t){var a=e.pitchDetector.do(t.inputBuffer.getChannelData(0));if(a){var n=e.getNote(a),r={name:j[n%12],value:n,cents:e.getCents(a,n),octave:Math.floor(n/12)-1,frequency:a};n>=30&&e.emit("notesDetected",[r])}}))})).catch((function(e){alert(e.name+": "+e.message)}))}},{key:"init",value:function(){var e=this;this.audioContext=new window.AudioContext,this.analyser=this.audioContext.createAnalyser(),this.scriptProcessor=this.audioContext.createScriptProcessor(this.bufferSize),window.Aubio().then((function(t){e.pitchDetector=new t.Pitch("default",e.bufferSize,1,e.audioContext.sampleRate),e.startRecord()}))}},{key:"getNote",value:function(e){var t=Math.log(e/this.middleA)/Math.log(2)*12;return Math.round(t)+this.semitone}},{key:"getStandardFrequency",value:function(e){return this.middleA*Math.pow(2,(e-this.semitone)/12)}},{key:"getCents",value:function(e,t){return Math.floor(1200*Math.log(e/this.getStandardFrequency(t))/Math.log(2))}},{key:"play",value:function(e){this.oscillator||(this.oscillator=this.audioContext.createOscillator(),this.oscillator.connect(this.audioContext.destination),this.oscillator.start()),this.oscillator.frequency.value=e}},{key:"stop",value:function(){this.oscillator.stop(),this.oscillator=null}}]),t}(y.a)),A=function(e,t){var a=b[e];if(!a)return null;for(var n=[t],r=1;r<a.length;r++){var i=(j.indexOf(n[r-1])+a[r-1])%j.length;n.push(j[i])}return n},M=a(17),_=(a(92),a(93),function(e){var t=e.name,a=void 0===t?"C#":t,n=e.octave,r=void 0===n?1:n,c=e.isSimilar,o=void 0!==c&&c,l=e.isActive,s=void 0===l||l,u=e.isInScale,d=void 0===u||u,m=e.isKey,v=void 0!==m&&m,p=["note","note--".concat(a[0].toLowerCase())];return o&&p.push("is-similar"),s&&p.push("is-active"),d||p.push("is-disabled"),v&&p.push("is-key"),i.a.createElement("div",{className:p.join(" ")},a,r)}),k=function(e){var t=["tuner__arrow"];return e.isActive&&t.push("is-active"),i.a.createElement("div",{className:t.join(" ")})},P=Object(l.b)((function(e){return{playingNote:e.playingNote}}))((function(e){var t=e.playingNote;return i.a.createElement("div",{className:"tuner"},i.a.createElement("div",{className:"tuner__col"},i.a.createElement(k,{isActive:t.cents<-10})),i.a.createElement("div",{className:"tuner__col tuner__note"},i.a.createElement(_,{isActive:t.cents>=-10&&t.cents<=10,name:t.name,note:t,octave:t.octave})),i.a.createElement("div",{className:"tuner__col"},i.a.createElement(k,{isActive:t.cents>10})))})),C=(a(94),a(130)),D=a(131),x=a(128),I=a(132),R=a(140),L=a(127),T=a(139),U=a(135),B=function(e){return{type:E,payload:e}},G=function(e){return{type:O,payload:e}},z=function(e){return{type:N,payload:e}},J=function(e){return{type:S,payload:e}},K=Object(l.b)((function(e){return{selectedScale:e.selectedScale}}),(function(e){return{onSelect:function(t){return e(J(t))}}}))((function(e){var t=e.selectedScale,a=e.onSelect,n=void 0===a?function(e){return e}:a,r=j.map((function(e){return i.a.createElement(R.a,{key:e,value:e},e)}));return i.a.createElement(L.a,{fullWidth:!0},i.a.createElement(T.a,{htmlFor:"sidebar-select-scale-key"},"Scale Key"),i.a.createElement(U.a,{value:t.key,inputProps:{id:"sidebar-select-scale-key"},onChange:function(e){return n(e.target.value)}},r))})),F=Object(l.b)((function(e){return{selectedScale:e.selectedScale}}),(function(e){return{onSelect:function(t){return e(z(t))}}}))((function(e){var t=e.selectedScale,a=e.onSelect,n=void 0===a?function(e){return e}:a,r=Object.entries(g).map((function(e){var t=Object(s.a)(e,2),a=t[0],n=t[1];return i.a.createElement(R.a,{key:a,value:a},n)}));return i.a.createElement(L.a,{fullWidth:!0},i.a.createElement(T.a,{htmlFor:"sidebar-select-scale"},"Scale"),i.a.createElement(U.a,{value:t.name,inputProps:{id:"sidebar-select-scale"},onChange:function(e){return n(e.target.value)}},r))})),W=a(129),q=function(e){var t=e.start,a=void 0===t?function(e){return e}:t;return i.a.createElement(W.a,{fullWidth:!0,variant:"contained",color:"secondary",onClick:a},i.a.createElement("span",{"aria-label":"microphone",role:"img"},"\ud83c\udfa4"),"\xa0Enable Recording")},Y=Object(C.a)((function(e){return{paper:{padding:e.spacing(2),color:e.palette.text.secondary}}})),H=function(e){var t=e.children;return i.a.createElement(D.a,{variant:"h6",gutterBottom:!0},t)},X=a(20);function $(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$(a,!0).forEach((function(t){Object(M.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var V=Object(l.b)((function(e){return{playingNote:e.playingNote,isMicActive:e.isMicActive,selectedScaleName:e.selectedScaleName,selectedScaleKey:e.selectedScaleKey}}),(function(e){return{actions:Object(X.bindActionCreators)(Q({},n),e)}}))((function(e){var t=e.actions,a=e.isMicActive,n=t.switchMic,r=void 0===n?function(e){return e}:n,c=Y();return i.a.createElement("div",{className:"sidebar"},i.a.createElement("div",{className:"sidebar__in"},i.a.createElement("div",{className:"sidebar__item"},i.a.createElement(x.a,{className:c.paper},i.a.createElement(H,null,"Mini Tuner"),a?i.a.createElement(P,null):i.a.createElement(q,{start:function(){r(!0),w.init()}}))),i.a.createElement("div",{className:"sidebar__item"},i.a.createElement(x.a,{className:c.paper},i.a.createElement(H,null,"Scale Settings"),i.a.createElement(I.a,{container:!0,spacing:2},i.a.createElement(I.a,{item:!0,xs:12},i.a.createElement(K,null)),i.a.createElement(I.a,{item:!0,xs:12},i.a.createElement(F,null)))))))})),Z=(a(95),Object(l.b)((function(e,t){var a=e.playingNote,n=e.selectedScale,r=e.isMicActive,i=t.name,c=t.octave,o=r&&a&&a.name===i;return{isSimilar:o,isActive:o&&a.octave===c,isInScale:n.scale.includes(i),isKey:n.key===i}}))(_)),ee=function(e){var t=e.children;return i.a.createElement("div",{className:"guitar__string"},t)},te=function(e){var t=e.note;return i.a.createElement("div",{className:"guitar__cell"},i.a.createElement("div",{className:"guitar__note"},i.a.createElement(Z,t)))},ae=function(e){var t=e.note;return i.a.createElement("div",{className:"guitar__zero"},i.a.createElement("div",{className:"guitar__note"},i.a.createElement(Z,t)))},ne=function(e){for(var t=e.frets,a=e.startNotes,n=[],r=0;r<6;r++){for(var c=[],o=a[r],l=j.indexOf(o.name),s=t+1,u=o.octave,d=0;d<s;d++){var m=(d+l)%j.length,v={name:j[m],octave:0===m?++u:u};0===d?c.push(i.a.createElement(ae,{note:v,key:d})):c.push(i.a.createElement(te,{note:v,key:d}))}n.push(i.a.createElement(ee,{key:r},c))}return i.a.createElement("div",{className:"guitar"},n)};a(96);function re(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var ie=function(e){var t=e.name,a=void 0===t?"C#":t,n=e.octave,r={name:a,octave:void 0===n?2:n};return i.a.createElement("div",{className:"piano__key"},i.a.createElement("div",{className:"piano__note"},i.a.createElement(Z,r)))},ce=function(e){for(var t=e.octaves,a=[],n=12*(void 0===t?3:t),r=0,c=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?re(a,!0).forEach((function(t){Object(M.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):re(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.startNote);r<n;r++){var o=j.indexOf(c.name);if(a.push(i.a.createElement(ie,{key:r,name:c.name,octave:c.octave})),~o){var l=(o+1)%j.length;0===l&&c.octave++,c.name=j[l]}}return i.a.createElement("div",{className:"piano"},a)},oe=Object(l.b)((function(e){return{guitarStringsStartNotes:e.guitarStringsStartNotes,pianoStartNote:e.pianoStartNote}}))((function(e){var t=e.guitarStringsStartNotes,a=e.pianoStartNote;return i.a.createElement("div",{className:"application__main"},i.a.createElement("div",{className:"board-container"},i.a.createElement(ne,{frets:18,startNotes:t})),i.a.createElement("div",{className:"board-container"},i.a.createElement(ce,{octaves:4,startNote:a})))})),le=a(134),se=a(74),ue=Object(se.a)({palette:{type:"dark"}}),de=a(133),me=a(137),ve=a(138),pe=a(71),fe=a.n(pe),ye=a(70),be=a.n(ye),he=Object(C.a)((function(e){return{root:{display:"flex"},drawer:Object(M.a)({},e.breakpoints.up("md"),{width:300,flexShrink:0}),menuButton:Object(M.a)({left:e.spacing(2),top:e.spacing(2),position:"fixed",zIndex:e.zIndex.modal+1},e.breakpoints.up("md"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:Object(M.a)({background:"#212121",width:300},e.breakpoints.down("md"),{paddingTop:e.spacing(8)}),content:Object(M.a)({flexGrow:1,minWidth:1100},e.breakpoints.down("md"),{paddingTop:e.spacing(6)})}})),ge=function(e){var t=e.Sidebar,a=e.Main,n=he(),r=i.a.useState(!1),c=Object(s.a)(r,2),o=c[0],l=c[1],u=function(){l(!o)},d=i.a.createElement(t,null);return i.a.createElement("div",{className:n.root},i.a.createElement("div",{className:n.menuButton},i.a.createElement(de.a,{size:"small",color:o?"default":"secondary",onClick:u,"aria-label":"edit"},o?i.a.createElement(be.a,null):i.a.createElement(fe.a,null))),i.a.createElement("nav",{className:n.drawer},i.a.createElement(me.a,{mdUp:!0,implementation:"css"},i.a.createElement(ve.a,{variant:"temporary",anchor:"left",open:o,onClose:u,classes:{paper:n.drawerPaper},ModalProps:{keepMounted:!0}},d)),i.a.createElement(me.a,{smDown:!0,implementation:"css"},i.a.createElement(ve.a,{classes:{paper:n.drawerPaper},variant:"permanent",open:!0},d))),i.a.createElement("main",{className:n.content},i.a.createElement(a,null)))},Oe=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;w.on("notesDetected",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=Object(s.a)(t,1),n=a[0],r=e.props.setPlayingNote;"function"===typeof r&&r(n)}))}},{key:"render",value:function(){return i.a.createElement("div",{className:"application"},i.a.createElement(le.a,{theme:ue},i.a.createElement(ge,{Sidebar:V,Main:oe})))}}]),t}(i.a.Component),Ee=Object(l.b)(null,(function(e){return{setPlayingNote:function(t){return e(G(t))}}}))(Oe);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ne=a(72),Se=a(58),je=a.n(Se);a(73);function we(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ae(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?we(a,!0).forEach((function(t){Object(M.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):we(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Me={playingNote:{name:"C",octave:3,cents:0},isMicActive:!1,scale:{name:h.MAJOR,key:j[0]}};Me.scale.scale=A(Me.scale.name,Me.scale.key);var _e=[{name:"E",octave:4},{name:"B",octave:3},{name:"G",octave:3},{name:"D",octave:3},{name:"A",octave:2},{name:"E",octave:2}],ke={name:"C",octave:2},Pe=Object(X.combineReducers)({playingNote:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me.playingNote,t=arguments.length>1?arguments[1]:void 0;return t.type===O?t.payload:e},isMicActive:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me.isMicActive,t=arguments.length>1?arguments[1]:void 0;return t.type===E?t.payload:e},guitarStringsStartNotes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e;arguments.length>1&&arguments[1];return e},pianoStartNote:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke;arguments.length>1&&arguments[1];return e},selectedScale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae({},Me.scale),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:var a=e.key,n=t.payload;return{key:a,name:n,scale:A(n,a)};case S:var r=e.name,i=t.payload;return{key:i,name:r,scale:A(r,i)};default:return e}}}),Ce=[je.a,Ne.a];var De=X.applyMiddleware.apply(void 0,Ce);var xe=De(X.createStore)(Pe),Ie=function(){o.a.render(i.a.createElement(l.a,{store:xe},i.a.createElement(Ee,null)),document.getElementById("root"))};xe.subscribe(Ie),Ie(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[81,1,2]]]);
//# sourceMappingURL=main.82765539.chunk.js.map